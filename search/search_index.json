{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>Hello! I\u2019m Bruno Prado, and this page showcases my technical skills in Data Analysis (SQL, Python) and my business expertise in Marketing Analytics.</p> <p>With over 10 years of experience in data and business analysis, I specialize in transforming data into strategic insights that drive operational excellence and business growth. I have successfully led analytics projects for global leaders such as Glovo, Zurich Insurance, Michelin, and L'Or\u00e9al, helping these organizations optimize processes, enhance decision-making, and identify new opportunities.</p> <p>Graduating Magna Cum Laude with a degree in Industrial Engineering, I bring a robust foundation in analytical skills and problem-solving. My expertise includes building and refining data pipelines, conducting in-depth analyses, and developing models and dashboards that translate data into actionable strategies.</p> <p>You can contact me on Linkedin.</p> <p>Quick Navigation Tips</p> <ul> <li>Use the table of contents on the right to navigate easily through the document.</li> <li>Some visualizations are interactive with, feel free to explore them by hovering and clicking!</li> </ul>"},{"location":"#projectsskills","title":"Projects/Skills:","text":"<p>(Please click on the headers to access the full page)</p>"},{"location":"#sql","title":"SQL","text":"<pre><code>This section contains problems related to:\n\n- Data Modeling and Entity Relationship Diagram;\n- Categorize users by number of devices;\n- Analyze sessions:\n    - Users in different apps/games (or in multiple games)\n    - Last session for each user\n- Calculate cohort metrics:\n    - Revenue (cohort size = month)\n    - Retention (cohort size = date)\n    - User's Cumulative Revenue from install_date to each activity_date\n</code></pre>"},{"location":"#user-acquisition-knowledge","title":"User Acquisition Knowledge","text":"<pre><code>This section discusses:\n\n- What are the main metrics for Product and Marketing teams;\n- What are the main KPIs to evaluate performance of marketing campaigns and creatives;\n- Trade-off between UA metrics and Product Metrics;\n- How to find balance to achieve successful user acquisition campaigns.\n</code></pre>"},{"location":"#campaign-analysis-using-python-work-in-progress-available-soon","title":"Campaign Analysis using Python - Work in Progress (available soon)","text":""},{"location":"#-paid-marketing-campaign-data-during-black-friday","title":"- Paid Marketing Campaign Data during Black Friday","text":""},{"location":"#attribution-model-with-python","title":"Attribution Model with Python","text":"<pre><code>Create a Multi-Touch Attribution to identify the most important channels and campaigns.\n</code></pre>"},{"location":"#ltv-model-work-in-progress-available-soon","title":"LTV Model - Work in Progress (available soon)","text":""},{"location":"#experiment-analysis-and-design-work-in-progress-available-soon","title":"Experiment Analysis and Design - Work in Progress (available soon)","text":""},{"location":"#tag-analysis-on-recipes-anova","title":"Tag analysis on recipes (ANOVA)","text":""},{"location":"about/","title":"About Me","text":"<p>Linkedin</p>"},{"location":"contact/","title":"Contact","text":"<p>Here's how you can contact me.</p>"},{"location":"projects/attribution/","title":"Attribution Model with Python","text":""},{"location":"projects/attribution/#problem","title":"Problem","text":"<p>Analyze the multi-touch attribution using the campaign_touchpoints.csv dataset.</p> <p>The goal is to attribute the conversions to different marketing touchpoints effectively.</p> <p>1) Implement a linear attribution model where each touchpoint shares equal credit for a conversion.</p> <p>2) Calculate the attributed conversions for each channel.</p> <p>3) Calculate the attributed conversions for each campaign.</p>"},{"location":"projects/attribution/#solution","title":"Solution","text":"Solution <p>Python - Jupyter Notebook</p>"},{"location":"projects/attribution/#navigation","title":"Navigation","text":"<p>Previous: Home</p>"},{"location":"projects/project1/","title":"Task One - Paid Marketing Campaign Data","text":""},{"location":"projects/project1/#introduction","title":"Introduction","text":"<p>Our Paid Marketing team is dedicated to engaging potential users for our app through targeted campaigns across various channels. The objective of these campaigns is to maximize app installations while maintaining a balanced consideration of financial implications. Users who sign up for a subscription within the YAZIO app count as converted. The revenue generated by subscriptions must be set against the marketing spend. You are provided with a dataset that includes campaign data for five marketing channels and multiple countries for November 2023. Our paid marketing team is interested in an analysis for two of our focus regions: Germany and the USA. Please consider 3 relevant KPIs of your choice to evaluate the performance in the past November and provide recommendations for the next November.</p>"},{"location":"projects/project1/#key-insights-and-recommendations","title":"Key Insights and Recommendations","text":"<p>Germany Key Insights</p> <ol> <li>Only <code>Channel C (iOS)</code> and <code>Channel A (Android)</code> were profitable.</li> <li>Black Friday led to an increase in installs, with a higher conversion rate while CPI remained low.</li> <li>iOS generated a profit of <code>\u20ac35250</code>, whereas android incurred a loss of <code>-\u20ac12656</code>.</li> </ol> <p>Germany Recommendations</p> <ol> <li>Focus on scaling profitable channels and reassess the performance of others.</li> <li>The Black Friday strategy proved effective; use it as a benchmark for the next season.</li> <li>Work towards improving profit on Android</li> </ol> <p>United States Key Insights</p> <ol> <li>No <code>Channel</code> was profitable.</li> <li><code>Channel C (iOS)</code> has potential with good volume of installs and good conversion rate.</li> <li>Black Friday saw a decline in installs, and profits remained significantly negative..</li> </ol> <p>United States Recommendations</p> <p>1.Prioritize channel optimization efforts.</p> <p>2.Focus on reducing the cost per install for Channel C (iOS).</p> <p>3.Reassess the Black Friday strategy to identify areas for improvement.</p> <p>Other Insights</p> <ol> <li>A profit of \u20ac9,560 is attributed to an unknown country. It\u2019s important to note that this might be due to data issues, and part of this profit could potentially originate from Germany or the US.</li> <li>Although the marketing team is currently focused on Germany and the US, it\u2019s worth highlighting that economic losses in France amount to \u20ac18,806, exceeding those in the US (\u20ac16,481).</li> </ol>"},{"location":"projects/project1/#data-analysis","title":"Data Analysis","text":"<p>KPI Selection</p> <p>In evaluating the performance of paid marketing campaigns, it is crucial to consider multiple Key Performance Indicators (KPIs) to gain a holistic understanding of campaign effectiveness. Each KPI provides unique insights into different aspects of performance, allowing for a balanced approach to decision-making. </p> <p>Since the objective of these campaigns is to maximize app installations while maintaining a balanced consideration of financial implications, keeping in mind the limitation to use few KPIs, I would choose: Installs, Cost Per Install (CPI), Install-to-Conversion Rate, and Profit.</p> <ul> <li>Installs reflect the volume of the campaign, showing how many users have been acquired through paid marketing efforts.</li> <li>CPI reflects the cost-efficiency of acquiring app installs, addressing the primary objective of maximizing installations while considering financial constraints.</li> <li>Install-to-Conversion Rate evaluates the quality of installs by measuring how effectively they convert into paying subscribers, ensuring that the installs generate meaningful engagement.</li> <li>Profit captures the financial outcome of campaigns, balancing revenue generation against marketing expenses to highlight overall success.</li> </ul>"},{"location":"projects/project1/#main-kpis-by-platform-and-channel","title":"Main KPIs by platform and channel","text":"Germany <p> Insights</p> <ol> <li>Scale High-Performing Channels:<ul> <li>Focus on Channel C (iOS) and Channel A (Android) for their profitability and efficiency(cpi).</li> </ul> </li> <li> <p>Reassess Poor Performers:</p> <ul> <li>Investigate high CPIs in Channels A and B (iOS) and optimize spending.</li> <li>Reevaluate Channel D (Android) due to zero installs and total loss.</li> </ul> </li> <li> <p>Reduce Spending on Loss-Making Channels:</p> <ul> <li>Limit investments in Channel B (Android) and Channel E (Android) due to inefficiency.</li> </ul> </li> </ol> United States <p> Insights</p> <ol> <li> <p>Scale High-Performing Channels:</p> <ul> <li>None of the channels in the USA are profitable, so there are no clear candidates for scaling at this point.</li> <li>Channel C (iOS) shows potential with the highest install volume (3,590) and a decent install-to-conversion rate (10.56%). Efforts should focus on reducing CPI (\u20ac4.18) and improving profitability.</li> </ul> </li> <li> <p>Reassess Poor Performers:</p> <ul> <li>Investigate Channel B (iOS) and Channel A (iOS) due to extremely high CPIs (\u20ac2,595.43 and \u20ac3,494.55, respectively) and no conversions.</li> <li>Reevaluate Channel D (Android), which incurred a total loss (\u20ac-1,534.93) with zero installs.</li> <li>Examine Channel B (Android), which has a moderate install volume (1,440) but suffers from a loss (\u20ac-3,181.17) and a suboptimal conversion rate (7.29%).</li> </ul> </li> <li> <p>Reduce Spending on Loss-Making Channels:</p> <ul> <li>Limit investments in Channels A and B (iOS) due to inefficient spending and lack of conversions.</li> <li>Deprioritize Channels D and E (Android), as they generated no meaningful results.</li> </ul> </li> <li> <p>Opportunities for Improvement:</p> <ul> <li>Focus on increasing the conversion rates for Channel C (iOS) and Channel B (Android) to turn high install volumes into meaningful profit.</li> <li>Explore alternative strategies for channels that consistently underperform across both platforms.</li> </ul> </li> </ol> <p>Important to mention:</p> <ul> <li>There are \u20ac9560 of profit assigned to unknown country. Important to mention that this could be due to data problems, and part of this profit could be coming from Germany or US.</li> <li>Altough the marketing team is currently focused on DE and US, it is important to mention the economic losses in France are \u20ac18806, even bigger than US(\u20ac16481).</li> </ul>"},{"location":"projects/project1/#main-kpis-over-time","title":"Main KPIs over time","text":"Germany <ul> <li> <p>There is an increase in installs after black friday.</p> </li> <li> <p>The cost per install is higher 1 week before black friday.</p> </li> <li> <p>The install to conversion rate increases at black friday, probably because of a good offer.</p> </li> <li> <p>The beginning of the month is not profitable.</p> </li> <li> <p>There is a CPI max on 19/11 that contributes to a profit minimum.</p> </li> </ul> United States <p></p> <ul> <li>There is an drop on installs on the last 15 days.</li> <li>The cost per install is relatively stable, with a peak one day before black friday.</li> <li>The conversion rate has high variability.</li> <li>The profit is negative in all days but 5th and 6th of November</li> </ul>"},{"location":"projects/project1/#cost-and-revenue-per-conversion-over-time","title":"Cost and Revenue per Conversion over Time","text":"Germany <ul> <li>There is an drop in RPA after black friday, but it is probably due to an offer.</li> </ul> United States <ul> <li>The RPA is always lower than CPA, leading to negative profitability.</li> </ul>"},{"location":"projects/project1/#funnel-analysis","title":"Funnel Analysis","text":"<p>Metrics available</p> <p>For further analysis, the funnel plot is available on the jupyter notebook:</p> <pre><code>Absolute metrics:\n    impressions\n    clicks\n    app_installs\n    conversions\n    marketing_spend_euro\n    revenue_euro\n\nRelative/Derived metrics:\n    click_through_rate\n    click_to_install_rate\n    install_to_conversion_rate\n\nCost associated metrics:\n    cpm\n    cpc\n    cpi (cost per install)\n    cpa (cost per conversion)\n\nBusiness metrics:\n    profit\n    return_on_ad_spend_percentage\n    return_on_investment_percentage\n    rpa (revenue per conversion)\n</code></pre> <p>Funnel Highlights</p> <p>Funnel by Channel</p> <p>Germany</p> <ul> <li> <p>Channels A and B with positive profit, install_to_conversion_rate &gt; 0.10%, cost_per_install &lt; 2 euros.</p> </li> <li> <p>The other Channels have negative profit.</p> </li> </ul> <p>United States</p> <ul> <li> <p>All Channels with negative or inexistent profit, cost_per_install &gt; 4 euros.</p> </li> <li> <p>Channel E has more clicks than impressions. There is a data quality problem.</p> </li> </ul> <p>Funnel by Platform</p> <p>Germany</p> <ul> <li>Similar volume of installs to android and ios</li> <li>ios profit: <code>\u20ac35250</code></li> <li>android profit: <code>-\u20ac12656</code></li> </ul> <p>United States</p> <ul> <li>70% of installs from ios, 30% from android</li> <li>ios profit: <code>-\u20ac11765</code> </li> <li>android profit: <code>-\u20ac4716</code></li> </ul>"},{"location":"projects/project1/#navigation","title":"Navigation","text":"<p>Previous: Home</p>"},{"location":"projects/project2/","title":"Task Two - Recipe Data","text":""},{"location":"projects/project2/#introduction","title":"Introduction","text":"<p>One of the main parts of our app is the recipe tab that allows users with a subscription to view numerous recipes provided by the recipe team. Users can search for recipes, view preparation details and save recipes as favorites. The recipe team wonders whether there are features that distinguish successful recipes from less successful recipes and asks for your help. You are provided with an aggregated data set containing data on the recipes viewed by the users. Some of the fields contain text, for example recipe title, description, instructions, etc. related to the recipe.</p>"},{"location":"projects/project2/#key-insights-and-recommendations","title":"Key Insights and Recommendations","text":""},{"location":"projects/project2/#tag-analysis","title":"Tag Analysis","text":"<p>Keywords balance (recipes volume vs view average)</p> <p>There are some tags with high average and low volume:</p> <pre><code>shake, smoothie, soup, casserole, ketogenic, 50kcal, basic, high_protein, fish\n</code></pre> <p>On the other hand, there are tags with low average and high volume:</p> <pre><code>vegetarian, vegan, lactose_free, gluten_free, easy, sugar_free\n</code></pre> <p>Please check the \"Tree Chart\" to know more.</p> <p>Recommendation</p> <p>Try to create new recipes exploring more the first group. The second group is more saturated and chances are they will bring less views.</p> <p>Check the recipes from the first group to understand their success and inspire the creation of new recipes.</p> <p>Tags effect with Statistical Significance Analysis</p> <p>There are tags that can affect (positively or negatively) the average of views of a recipe with statistical signficance. Please go to the section ANOVA to see the data.</p> <p>Tags with positive impact:</p> <pre><code>low_carb,low_calorie, low_fat,high_protein,meat,\ncasserole, shake, few_ingredients, fast, breakfast, 300kcal\n</code></pre> <p>Tags with negative impact:</p> <pre><code>pescatarian, vegan, lactose_free, high_fiber, vegetables,\nsalad, baking,easy, snack, on_the_go, 700kcal.\n</code></pre> <p>note: the difficulty level doesn't affect the views average.</p> <p>Recommendation</p> <p>Even though this result has statistic significance, does not mean that the negative tags are absolutely forbidden and we can only create recipes using the positive tags.</p> <p>We should see it as a reflection of the users interest.</p> <p>The users may prefer:</p> <ul> <li> <p><code>low_fat</code>, <code>low_calorie</code>, <code>low_carb</code> diets instead of <code>pescatarian</code>, <code>vegan</code>, <code>lactose_free</code> diets.</p> </li> <li> <p><code>Meat</code> rather than <code>vegetables</code></p> </li> <li> <p><code>Casserole</code>, <code>shake</code>, rather than <code>salad</code> and <code>baked</code> recipes.</p> </li> <li> <p><code>Fast</code> recipes with <code>few ingredients</code></p> </li> <li> <p><code>Breakfast</code> instead of other meal time. Maybe because they already know the basics for the lunch, but they would like to have options for breakfast beyond plain eggs. </p> </li> <li> <p><code>Lower</code> calories recipes because people are focused on loosing weight.</p> </li> </ul>"},{"location":"projects/project2/#numeric-values","title":"Numeric Values","text":"<ul> <li>Preparation time: Recipes with longer preparation time have lower views.</li> <li>Number of steps:The top 9 recipes in terms of views have from 4 to 6 steps.</li> <li>Number of tags:The most viewed recipes have usually from 7 to 13 tags.</li> <li>Correlation: the three metrics above are bad predictors for views (low correlation)</li> </ul> <p>Recommendation</p> <ul> <li>Avoid creating overcomplicated recipes (many steps)</li> <li>Recipes linked to few tags are \"too simple\", aim the sweet spot (4 to 6)</li> </ul>"},{"location":"projects/project2/#data-visualization","title":"Data Visualization","text":""},{"location":"projects/project2/#numeric-values_1","title":"Numeric Values","text":"ScatterPlots <p>Below are the scatter plots showing the relationships between <code>No Hits</code> and various features:</p> <ol> <li>Preparation Time vs No Hits: Shows how preparation time correlates with hits.</li> <li>Steps vs No Hits: Highlights the impact of steps on hits.</li> <li>No Tags vs No Hits: Examines the role of tags in influencing hits.</li> </ol> <p></p> <ul> <li>Recipes with longer preparation time have lower views.</li> <li>The top 9 recipes in terms of views have from 4 to 6 steps.</li> <li>The most viewed recipes have usually from 7 to 13 tags.</li> </ul> Histogram <p></p> Correlation <p>Only weak correlations detected. </p> PPScore <p>No Predictive Power (PPS = 0): Features (preparationtime, steps, no_tags) show no predictive relationship with no_hits. The Decision Tree Regressor performs no better than a baseline (mean prediction).  Model Performance: Baseline and model errors are similar, indicating that these features do not explain variance in no_hits. Business Implications: Current features do not effectively predict no_hits. The analysis suggests either insufficient feature relevance or weak data patterns.</p>"},{"location":"projects/project2/#categorical-values","title":"Categorical Values","text":"<p>The tags are grouped by similarity to help in the further analysis.</p> Group Tags Dietary Preferences vegetarian, vegan, pescatarian, lactose_free, gluten_free, low_carb, ketogenic, low_fat, low_calorie Meal Type lunch, dinner, breakfast, snack, on_the_go, dessert Calories (kcal) 50kcal, 100kcal, 200kcal, 300kcal, 400kcal, 500kcal, 600kcal, 700kcal Type of Food fruits, vegetables, meat, fish Cooking Style baking, salad, soup, casserole, smoothie, shake Nutritional Focus high_protein, high_fiber, detox, clean_eating Flavor Profile sweet, sugar_free Occasions christmas Complexity/Convenience easy, basic, fast, few_ingredients <p>Tree Chart - Keywords balance</p> <p>The size is the average views, the color is the number of recipes for each tag:</p> <p>(you can interact with the chart clicking with the mouse)</p> <p></p> <ul> <li> <p>There are some tags with high average and low volume, we could create more recipes using them:</p> <ul> <li>Shake, smoothie, soup, casserole, ketogenic, 50kcal, basic, high_protein, fish</li> </ul> </li> <li> <p>On the other hand, there are tags with high volume and low average, which we should avoid using for new recipes:</p> <ul> <li>vegetarian, vegan, lactose_free, gluten_free, easy, sugar_free</li> </ul> </li> </ul> Boxplot <p>Please check the jupyter notebook.</p> <p>ANOVA for groups</p> <p>I applied ANOVA for each tag against the group to verify if there is an effect on views average and if the result is statistically significant.</p> <p>The number represents the effect on the views average:</p> <p><code>avg views for recipes with the tag</code> - <code>avg views for the other recipes in the same group</code></p> <p>Legend:</p> <ul> <li> <p>Green: positive impact with statistic significance.</p> </li> <li> <p>Red: negative impact with statistic significance.</p> </li> <li> <p>Grey: No statistic significance.</p> </li> </ul> <p></p> Styled Groups Table <p>Below is the styled DataFrame showing aggregated statistics for no_hits (views):</p> <p></p>"},{"location":"projects/sql/","title":"SQL","text":"<p>This document contains problems related to:</p> <ul> <li>Data Modeling and Entity Relationship Diagram</li> <li>Categorize users by number of devices</li> <li>Analyze sessions:<ul> <li>Users in different apps/games (or in multiple games)</li> <li>Last session for each user</li> </ul> </li> <li>Calculate cohort metrics:<ul> <li>Revenue (cohort size = month)</li> <li>Retention (cohort size = date)</li> <li>User's Cumulative Revenue from install_date to each activity_date</li> </ul> </li> </ul>"},{"location":"projects/sql/#problem-1-define-the-connections-between-the-described-tables-draw-an-erd","title":"Problem 1: Define the connections between the described tables (draw an ERD)","text":"Input Tables <p>users :a table holding the entire list of users, including the following columns:</p> <pre><code>- user_id, username, first_platform, first_install_date, first_cpn_id sessions_cnt, ltv\n</code></pre> <p>devices \u2013 a table holding the list of devices and data on their apps installations, including the following columns:</p> <pre><code>- device_token, app_id, platform, idfa, gaid, lead_user_id, install_date, cpn_id\n</code></pre> <p>apps \u2013 a table holding the different apps of the company, including the following columns:</p> <pre><code>- app_id, app_name, is_prod, release_date\n</code></pre> <p>session_start \u2013 a table holding the events of starting a session in one of the apps, including the following columns:</p> <pre><code>- session_id, device_token, app_id, session_start_ts (timestamp)\n</code></pre> <p>game_event \u2013 a table holding all the events performed by a user within the game/product, including the following columns:</p> <pre><code>- event_id, device_token, app_id, event_type, event_name, event_ts\n</code></pre> Solution <p></p> <p>Primary Keys (PK) and Foreign Keys (FK):</p> <pre><code>- Apparently \u2018products\u2019 and \u2018users\u2019 \u2018session_start\u2019 and \u2018game_events\u2019 tables have PKs,\n- Devices has \u201cdevice_token\u201d, which at a first sight could look like a PK. However, since\n  \u201cdevice_token\u201d is not unique, it can\u2019t be considered a PK.\n\n  It\u2019s good practice to have a PK defined for every table, it helps with data integrity,\n  indexing, and maintaining relationships with other tables. If a table has no PK, there can\n  be difficulties when updating or deleting specific rows, and making querying the table\n  less efficient.\n\n- Fields with \u2018*\u2019 represent assumed keys.\n</code></pre> <p>Relationships:</p> <pre><code>- users table connects to devices table using a many-to-many relationship.\n- devices table connects to session_start table using a one-to-many relationship.\n- devices table connects to products table using a many-to-many relationship.\n- devices table connects to game_events table using a one-to-many relationship.\n- session_start table connects to products table using a many-to-one relationship.\n- products table connects to game_events table using a one-to-many relationship.\n</code></pre>"},{"location":"projects/sql/#problem-2-write-queries-that-answer-the-following-questions","title":"Problem 2: Write queries that answer the following questions","text":"<p>2.1 Present the number of devices per user and add a category value from the following list: \u201csingle device\u201d, \u201cmultiple devices\u201d, \u201cno device\u201d</p> Solution <pre><code>SELECT \n    user_id,username,\n    COUNT(DISTINCT d.device_token) AS devices,\n    -- create the category value\n    CASE\n    WHEN COUNT(DISTINCT d.device_token) &gt; 1 THEN \"multiple devices\"\n    WHEN COUNT(DISTINCT d.device_token) = 1 THEN \"single device\"\n    ELSE \"no device\"\n    END AS category\nFROM users AS u\nLEFT JOIN devices d\nON u.user_id = d.lead_user_id\nGROUP BY user_id,username\nORDER BY user_id\n</code></pre> <p>This solution ensures that all users will be displayed (even the \u201cno device\u201d ones) and includes the username.</p> <p>If we replace the LEFT JOIN (more resource intensive) we can improve the query performance, querying directly the \u201cdevices\u201d table. The performance improvement comes with the cost of not having the username and not having the \u201cno device\u201d users, since they won\u2019t appear in the \u201cdevices\u201d table.</p> <p><pre><code>SELECT\n    lead_user_id,\n    COUNT(DISTINCT device_token) as devices,\n    -- create the category column\n    CASE\n    WHEN COUNT(DISTINCT device_token)=0 THEN 'no device'\n    WHEN COUNT(DISTINCT device_token)=1 THEN 'single device'\n    WHEN COUNT(DISTINCT device_token)&gt;1 THEN 'multiple devices'\n    END AS device_category\nFROM devices\nGROUP BY lead_user_id\n</code></pre> Testing both queries in the specific database environment being used is the best way to make an informed decision, considering both execution time and resource utilization.</p> <p>2.2 Return a list of usernames that played (had sessions) in both of the following apps: \u201ccrazyrace\u201d, \u201cepicbattle\u201d. (give 2 different ways)</p> Solution <p>Solution 1: Use Common Table Expressions (CTEs) to isolate devices associated with each game.</p> <pre><code>    -- create CTE to isolate devices per game\n    WITH\n    crazyrace_devices AS (\n        SELECT DISTINCT device_token\n        FROM session_start\n        WHERE product_id ='crazyrace'),\n\n    epicbattle_devices AS (\n        SELECT DISTINCT device_token\n        FROM session_start\n        WHERE product_id ='epicbattle'),\n\n    both_games_devices AS (\n        SELECT *\n        FROM crazyrace_devices\n        INNER JOIN epicbattle_devices USING (device_token))\n\n    -- Main Query\n    SELECT DISTINCT u.username\n    FROM users u\n    -- filter only users that played both games\n    WHERE u.user_id IN (SELECT DISTINCT lead_user_id\n                        FROM devices\n                        WHERE device_token IN (SELECT device_token\n                                                FROM both_games_devices))\n</code></pre> <p>Solution 2: Use SUBQUERIES and INTERSECT</p> <pre><code>    SELECT username\n    FROM users\n    -- filter crazyrace users\n    WHERE user_id IN (  SELECT lead_user_id\n                        FROM devices\n                        WHERE device_token IN ( SELECT device_token\n                                                FROM session_start\n                                                WHERE product_id = 'crazyrace')\n    )\n    -- get players of both games\n    INTERSECT\n    SELECT username\n    FROM users\n    -- filter epicbattle users\n    WHERE user_id IN ( SELECT lead_user_id\n                       FROM devices\n                       WHERE device_token IN ( SELECT device_token\n                                               FROM session_start\n                                               WHERE product_id = 'epicbattle')\n    );\n</code></pre> <p>2.3 What is the session_id of the last session per user? (the session_id\u2018s are not necessarily ascending according to the session start time)</p> Solution <pre><code>WITH RankSessions AS (\n/* \n-- This CTE ranks sessions for each user and device-product combination based on the session start timestamp.\n-- It\u2019s important to use device_id and product_id as joining keys together to ensure correct matching,\n   especially in cases where multiple games are played on the same device by different users.\n   For example, the device \u201cASG13DL\u201d was used by \u201cu1\u201d to install \u201ccrazyrace\u201d and \u201cepicbattle\u201d, and used by \u201cu4\u201d to install \u201cgolf-race\u201d.\n-- It assigns a row number (rn) to each session, where the most recent session gets rn = 1.\n*/\n\nSELECT\n    u.user_id,\n    u.username,\n    d.device_token,\n    d.product_id,\n    s.session_id,\n    s.session_start_ts,\n    ROW_NUMBER() OVER (\n        PARTITION BY u.user_id -- to ensure ranking is done per user. Here we don\u2019t use product_id because we focus on the latest session for each user regardless of the specific product.\n        ORDER BY s.session_start_ts DESC -- to rank the latest session as 1\n    ) AS rn\nFROM users AS u\nJOIN devices AS d ON u.user_id = d.lead_user_id\nJOIN session_start AS s ON d.device_token = s.device_token AND d.product_id = s.product_id\n-- If product_id is not used as key, the result will be wrong showing \u2018s11\u2019 for both \u2018Oliver\u2019 and \u2018Sebastian\u2019, because they shared the same device. Examining the data, the correct is \u2018Sebastian\u2019 playing \u2018golf-race\u2019(s11) and Oliver playing \u2018crazyrace\u2019 (s7) for their last sessions.\n)\n\n-- Main Query\nSELECT user_id,username,session_id,session_start_ts\nFROM RankSessions\nWHERE rn = 1; -- Filter to only include the most recent session for each user\n</code></pre>"},{"location":"projects/sql/#problem-3-calculate-total-revenue-retention-cohort-analysis-and-cumulative-revenue-using-userscsv-and-user_activitiescsv","title":"Problem 3: Calculate total revenue, retention cohort analysis and cumulative revenue using <code>users.csv</code> and <code>user_activities.csv</code>","text":"Input Tables (samples) <p>users:</p> user_id install_date country abc123 2023-11-17 United States xyz999 2023-11-05 Germany qwe777 2023-09-28 Spain <p>user_activities:</p> user_id install_date country activity_date revenue XkiSoEK5f4tyE2ZIOWRs1A== 2024-03-03 Indonesia 2024-03-03 0.00065617357790376837 UiR+iATpDo8DcYehle/EPw== 2024-03-03 Germany 2024-03-03 0.11618769868339844 g18jNkYM+fIfzjNkxIxhuQ== 2024-03-02 Hong Kong 2024-03-03 0.013600176580795429 <p>3.1 Write an SQL query to retrieve the total revenue generated by users who signed up in 2023, grouped by month.</p> Solution <pre><code>SELECT\n    EXTRACT(YEAR FROM a.activity_date) AS year,\n    EXTRACT(MONTH FROM a.activity_date) AS month,\n    SUM(a.revenue) AS total_revenue\nFROM\n    `user_activities` a\nJOIN\n    `users` u\n    ON a.user_id = u.user_id\nWHERE\n    EXTRACT(YEAR FROM u.install_date) = 2023\nGROUP BY\n    year, month\nORDER BY\n    year, month;\n</code></pre> <p>output:</p> <p></p> <p>3.2 Using the SQL database, perform a retention cohort analysis to understand user retention over time.</p> Solution <pre><code>WITH user_activities AS (\n\n    SELECT a.user_id,\n        u.install_date,\n        a.activity_date,\n        DATE_DIFF(a.activity_date, u.install_date, DAY) AS days_since_install\n    FROM user_activities a\n    JOIN users u\n        ON a.user_id = u.user_id\n),\n\ncohort_sizes AS (\n    SELECT install_date,\n        COUNT(DISTINCT user_id) AS cohort_size\n    FROM users\n    GROUP BY install_date\n),\n\nactive_users AS (\n    SELECT  install_date,\n            days_since_install,\n            COUNT(DISTINCT user_id) AS active_users\n    FROM user_activities\n    GROUP BY install_date, days_since_install\n)\nSELECT\n    au.install_date,\n    au.days_since_install,\n    cs.cohort_size,\n    au.active_users,\n    ROUND((au.active_users * 100.0 / cs.cohort_size), 2) AS retention_rate_percentage\nFROM\n    active_users au\nJOIN\n    cohort_sizes cs\n    ON au.install_date = cs.install_date\nORDER BY\n    au.install_date,\n    au.days_since_install;\n</code></pre> <p>output:</p> <p></p> <p>3.3 Calculate the cumulative revenue for each user up to each activity date and rank the activities of each user by activity date and show the cumulative revenue.</p> Solution <p><pre><code>SELECT\n    a.user_id,\n    a.activity_date,\n    u.install_date,\n    a.revenue,\n    SUM(a.revenue) OVER (PARTITION BY a.user_id ORDER BY a.activity_date) AS cumulative_revenue,\n    ROW_NUMBER() OVER (PARTITION BY a.user_id ORDER BY a.activity_date) AS activity_rank,\n    DATE_DIFF(a.activity_date, u.install_date, DAY) AS days_since_install\nFROM\n    user_activities a\nJOIN\n    users u\nON\n    a.user_id = u.user_id\nORDER BY\n    a.user_id,\n    a.activity_date;\n</code></pre> output:</p> <p></p>"},{"location":"projects/sql/#navigation","title":"Navigation","text":"<p>Previous: Home</p>"},{"location":"projects/user_acquisition/","title":"User Acquisition Knowledge","text":""},{"location":"projects/user_acquisition/#1-the-companys-success-depends-on-a-good-job-done-by-the-product-team-the-marketing-operations-user-acquisition-team-at-a-high-level-which-kpis-would-you-track-for-evaluating-the-performance-of-each-team-explain-why","title":"1. The company's success depends on a good job done by the Product team &amp; the Marketing Operations\u2019 (User Acquisition) team. At a high level, which KPIs would you track for evaluating the performance of each team? Explain why.","text":"Solution <p>Please keep in mind this answer was focused on gaming companies.</p> Product Team <ul> <li>Daily Active Users (DAU) / Monthly Active Users (MAU): Indicates the game's ability to engage users, directly impacting its market presence and revenue.</li> <li>Retention Rate (Day 1, Day 7, Day 30\u2026): Indicates how well the game keeps users coming back. Critical for understanding long-term engagement, important for sustained revenue.</li> <li>Average Revenue Per User (ARPU): Reflects the effectiveness of monetization strategies.</li> <li>Revenue: reflects the impact of the game and monetization operations to the company's success.</li> <li>Session Length and Frequency: Indicators of how engaging the game is, showing how long users play in each session and how often they open the game. Higher user engagement contributes to better retention and monetization potential.</li> <li>Conversion Rate (from free to paying users): Measures the effectiveness of in-game purchasing systems.</li> <li>Churn Rate: A low churn rate suggests that the product is sticky and retains users effectively.</li> <li>Lifetime Value (LTV): An estimate of the total revenue a user will generate throughout their time playing the game. High L TV values suggest a product that does well in retaining and monetizing users.</li> <li>Uptime: though it\u2019s more related to IT operations, it\u2019s important for the product team because it can have heavy impact on user experience, retention and revenue streams</li> </ul> Marketing Team <ul> <li>Customer Acquisition Cost (CAC): should be lower than L TV in order to ensure sustainable growth and financial success. (CPI is similar but less broad)</li> <li>Conversions: useful to understand scale of UA efforts, marketing variations, detect trends, help to identify issues like attribution modeling and conversion tracking problems, etc.</li> <li>Ad Spend: Important to ensure that marketing efforts are aligned with planning and company\u2019s goals.</li> <li>Lifetime Value (LTV): to guide budget allocation for user acquisition, to ensure quality of users being attracted.</li> <li>Return on Ad Spend (ROAS): Direct measure of campaign success, indicating whether the ad spend is generating su\ufb03cient revenue.</li> <li>Install or Conversion Rate: Offers immediate feedback on the effectiveness of creative assets and targeting strategies in convincing users to try/use the game.</li> </ul>"},{"location":"projects/user_acquisition/#2-what-do-you-think-are-the-main-kpis-to-assess-the-performance-of-a-marketing-campaign","title":"2. What do you think are the main KPIs to assess the performance of a marketing campaign?","text":"Solution <p><code>Profit</code>,<code>Cost Per Action</code>, <code>Conversion Rate</code>,<code>Conversions</code>, <code>ROAS</code> and <code>LTV</code> .</p> <p>However, the metrics are interconnected and it\u2019s necessary to have a comprehensive view of the whole funnel to better understand and optimize the campaigns.</p> <p>Funnel metrics:</p> <pre><code>- Impressions, Views, Clicks, Installs, Conversions\n- Associated costs per events above (CPM, CPV, CPC, CPI, CPA).\n- Conversion Rates from each step of the funnel (View Rate, CTR, Click-to-install,\nInstall-to-Conversion)\n</code></pre> <p>After conversion metrics:</p> <pre><code>- Projected Conversions and Projected Revenue (cohort analysis)\n- Revenue, ROAS, LTV\n</code></pre> <p>If the campaign\u2019s goal is related to brand awareness, engagement metrics, website/app tra\ufb03c and brand mentions can be added to the analysis.</p>"},{"location":"projects/user_acquisition/#3-what-about-the-games-creatives","title":"3. What about the game's creatives?","text":"Solution <ul> <li>Viewability Rate (viewable impression rate)</li> <li>3 seconds View Rate</li> <li>Other time windows View Rate like 25%,50%, 75%, 95% of video length</li> <li>CTR</li> <li>Install Rate</li> <li>The amount of creatives per ad group.</li> <li>The start date, age, spend and conversions per ad.</li> <li>Spend Materiality - the percentage of spend compared to other creatives inside the same adgroup/campaign.</li> <li>Conversions Materiality</li> <li>Quality Score (Google Ads)</li> <li>The metrics grouped by category, product and ad angle of the creative.</li> <li>Saturation - evolution over time of spend, conversions, CTR, CVR, etc.</li> <li>Social media engagement and Sentiment Analysis</li> </ul>"},{"location":"projects/user_acquisition/#4-is-there-a-trade-off-between-the-ua-metrics-and-product-metrics","title":"4. Is there a trade-off between the UA metrics and Product metrics?","text":"Solution <p>Yes.</p> <p>Cost x Quality : e.g. for UA a lower CPI is better, but it can bring lower quality tra\ufb03c (with worse product metrics), resulting in smaller profit.</p> <p>Short vs Long Term value : a campaign with bad short term ROAS can have a promising forecasted long term ROAS. The challenge is to accurately predict long-term revenue and make sure the cash flow can support upfront marketing spend.</p>"},{"location":"projects/user_acquisition/#5-what-is-the-relation-between-cpi-and-monetization-metrics","title":"5. What is the relation between CPI and monetization metrics?","text":"Solution <p>CPI impacts monetization metrics; a high CPI requires higher revenue per user to maintain profitability.</p> <p>Lower CPI can afford a lower average revenue per user (ARPU) to still be profitable, but if monetization metrics like ROAS are low, even a low CPI may not justify the spend.</p> <p>To focus only on reducing CPI might compromise user quality, potentially lowering revenue per user and affecting long-term monetization.</p>"},{"location":"projects/user_acquisition/#6-what-about-game-engagement","title":"6. What about game engagement?","text":"Solution <p>Engagement metrics (like retention rates and active users) are crucial for long-term revenue. </p> <p>Higher engagement often leads to better monetization opportunities through in-app purchases and ad revenue.</p>"},{"location":"projects/user_acquisition/#7-how-would-you-assess-those-relations-to-find-balance","title":"7. How would you assess those relations to find balance?","text":"Solution <p>To find balance, assess the cost of acquiring a user (CAC) against the value that user brings over time (LTV - Lifetime Value).</p> <p>The goal is to optimize both UA and product metrics to ensure that LTV &gt; CAC.</p> <p>Use cohort analysis to understand how different user groups behave and contribute to  revenue over time, adjusting strategies to optimize both acquisition costs and user value.</p> <p>Use continuous A/B testing and data analysis to find and maintain this balance, ensuring both acquisition efforts and product development are aligned for profitability.</p>"},{"location":"projects/user_acquisition/#navigation","title":"Navigation","text":"<p>Previous: Home</p>"}]}